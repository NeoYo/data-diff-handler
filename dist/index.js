!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=t.isString=t.isObject=t.isArray=void 0,t.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)},t.isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncQueryHOC=t.SyncQueryFactory=t.syncQueryCb=void 0;const r=n(2),o=n(5),i=n(3),c=n(0),s=n(6);t.syncQueryCb=function(e){return function(t,n){t.callbackName=n,c.isArray(e)&&e.length>0&&(t.callbackDeps=e)}};function u(e,t,n,u){return u=c.isObject(u)?Object.assign({wait:600},u):{wait:600},class extends e{constructor(e){super(e),this.state=Object.assign(Object.assign({},this.state),this.getStateFromURL(t)),this.reBindCallback(),this.stateDiffEffect=r.debounce(this.stateDiffEffect,u.wait).bind(this)}getStateFromURL(e){const t=location.href.split("?")[1];if(null!=t)return o.queryToState(t,e,u.parser)}syncStateToURL(e){const[n,r]=location.href.split("?"),c=i.filterQuery(r,(e,n)=>-1===t.indexOf(e)),s=`${n}?${o.stateToQuery(e,u.stringify)}&${c}`;location.href=s}reBindCallback(){if(this.callbackName=this.callbackName||n,null==this.callbackName)return;if("function"!=typeof super[this.callbackName])return void console.error("sync-query: callback must be react component method name!!! Tips:  SyncQueryFactory and syncQueryHOC must be closest with Component Class");const e=Object.create(this);e.setState=(e,t)=>{this.setState(e,t,!0)},this[this.callbackName]=super[this.callbackName].bind(e),this.callbackDeps=this.callbackDeps||u.callbackDeps}componentDidUpdate(e,t){return!0===this.state.__SYNC_QUERY_DIFF_IGNORE__||this.stateDiffEffect(t,this.state),super.componentDidUpdate&&super.componentDidUpdate(e,t)}stateDiffEffect(e,n){if(null==e&&null==n)return void console.error("sync-query: stateDiffEffect could not be null");const o=r.pick(e,t),i=r.pick(n,t),c=!s.deepEqual(o,i);c&&this.syncStateToURL(i);const u=this.callbackDeps;if(null==u)c&&this[this.callbackName]&&"function"==typeof this[this.callbackName]&&this[this.callbackName]();else{const t=r.pick(e,u),o=r.pick(n,u);!s.deepEqual(t,o)&&this[this.callbackName]&&"function"==typeof this[this.callbackName]&&this[this.callbackName]()}}setState(e,t,n){return"object"==typeof e?super.setState(Object.assign(Object.assign({},e),{__SYNC_QUERY_DIFF_IGNORE__:n}),t):"function"==typeof e?super.setState((function(t,r){return Object.assign(Object.assign({},e(t,r)),{__SYNC_QUERY_DIFF_IGNORE__:n})}),t):super.setState(e,t)}}}t.SyncQueryFactory=function(e,t,n){return function(r){return u(r,e,t,n)}},t.syncQueryHOC=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=t.map=t.filterExist=t.filter=t.pick=void 0;const r=n(0);function o(e,t){return r.isObject(e)?Object.keys(e).reduce((n,r)=>("function"!=typeof t&&(t=i),t(n,r,e)?Object.assign(Object.assign({},n),{[r]:e[r]}):n),{}):(console.error(`Param ${e} is not a object`),{})}function i(e,t,n){return null!=n[t]}function c(e,t,n){return"boolean"==typeof n[t]||Boolean(n[t])}t.pick=function(e,t){return o(e,(function(e,n,r){return-1!=t.indexOf(n)}))},t.filter=o,t.filterExist=function(e){return o(e,c)},t.map=function(e,t){return r.isObject(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r],r),n),{}):(console.error(`Param ${e} is not a object`),{})},t.debounce=function(e,t){let n;return function(...r){const o=this;clearTimeout(n),n=setTimeout((function(){e.apply(o,r)}),t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterQuery=t.encodeQuery=t.parseQuery=t.formatQuery=t.formatUrl=void 0;const r=n(0);function o(e){return Object.keys(e).sort().map(t=>{const n=e[t];return null==n?"":Array.isArray(n)?n.slice().map(e=>[t,"=",e].join("")).join("&"):t+"="+n}).filter(Boolean).join("&")}t.formatUrl=function(e,t){let n;const r=e.indexOf("://");-1!==r?(n=e.substring(0,r),e=e.substring(r+3)):e.startsWith("//")&&(e=e.substring(2));let i,c=e.split("/"),s=(n?n+"://":"//")+c.shift(),u=c.filter(Boolean).join("/");return c=u.split("#"),2===c.length&&([u,i]=c),s+=u?"/"+u:"",t&&"{}"!==JSON.stringify(t)&&(s+=(2===e.split("?").length?"&":"?")+o(t)),s+=i?"#"+i:"",s},t.formatQuery=o,t.parseQuery=(e,t=decodeURIComponent)=>{const n={},r=e.split("&");for(let e=0;e<r.length;e++){const o=r[e].split("=");n[t(o[0])]=t(o[1]||"")}return n},t.encodeQuery=(e,t=encodeURIComponent)=>Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,n])=>t(e)+(null!=n?"="+t(n):"")).join("&"),t.filterQuery=(e,t)=>r.isString(e)?0===e.length?"":e.split("&").reduce((e,n)=>{const[r,o]=n.split("=");return t(r,o)&&e.push(n),e},[]).join("&"):""},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SyncQueryFactory=t.syncQueryHOC=t.syncQueryCb=void 0;const i=n(1);Object.defineProperty(t,"syncQueryCb",{enumerable:!0,get:function(){return i.syncQueryCb}}),Object.defineProperty(t,"syncQueryHOC",{enumerable:!0,get:function(){return i.syncQueryHOC}}),Object.defineProperty(t,"SyncQueryFactory",{enumerable:!0,get:function(){return i.SyncQueryFactory}}),o(n(1),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stateToQuery=t.queryToState=t.parseParam=void 0;const r=n(3),o=n(2),i=n(0);function c(e){let t;try{t=JSON.parse(e)}catch(t){console.error(`parseParam error: ${e} can't be JSON.parse. Error: ${t}. Type: ${typeof e}. `)}return t}function s(e){return JSON.stringify(e)}t.parseParam=c,t.queryToState=function(e,t,n){if(!i.isString(e)||0===e.length)return{};const o=r.parseQuery(e);return Object.keys(o).filter(e=>(null==t||t.indexOf(e))>-1).reduce((e,t)=>{const r=(i.isObject(n)&&i.isFunction(n[t])&&n[t]||c)(o[t]);return null!=r&&(e[t]=r),e},{})},t.stateToQuery=function(e,t){if(!i.isObject(e))return"";const n=o.filterExist(e);return r.encodeQuery(o.map(n,(e,n)=>(i.isObject(t)&&i.isFunction(t[n])&&t[n]||s)(e)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=void 0,t.deepEqual=function(...e){var t,n,r,o;function i(e,t){var n;if(isNaN(e)&&isNaN(t)&&"number"==typeof e&&"number"==typeof t)return!0;if(e===t)return!0;if("function"==typeof e&&"function"==typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(r.indexOf(e)>-1||o.indexOf(t)>-1)return!1;for(n in t){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!=typeof e[n])return!1}for(n in e){if(t.hasOwnProperty(n)!==e.hasOwnProperty(n))return!1;if(typeof t[n]!=typeof e[n])return!1;switch(typeof e[n]){case"object":case"function":if(r.push(e),o.push(t),!i(e[n],t[n]))return!1;r.pop(),o.pop();break;default:if(e[n]!==t[n])return!1}}return!0}if(e.length<1)return!0;for(t=1,n=e.length;t<n;t++)if(r=[],o=[],!i(e[0],e[t]))return!1;return!0}}])}));
//# sourceMappingURL=index.js.map